# ellm

## 简介

### LLM 的内存分配

LLM 的内存开销包括三部分，静态权重(static weights)、动态活跃内存(dynamic activations)，和 KV Cache，其中，静态权重看名字就知道是可预测的，内存管理的问题自然落在了动态活跃内存和 KV Cache之间。运行时内存(runtime memory)依赖于静态张量抽象，而KV Cache由基于页表的虚拟层管理，这二者的管理是隔离的，达不到全局最优，导致了吞吐量20%的下降。

### 本文核心思想

为了解决这些限制，本文提出了 ELLM 这一弹性内存管理框架，该想法源自操作系统中的 memory ballooning 机制，核心组成如下：

1. 虚拟张量抽象：将张量的虚拟地址空间从物理GPU内存解耦，并建立了一个统一的内存池
2. 动态内存机制：动态地调整运行时内存分配，并将CPU内存作为可扩展的缓冲
3. 轻量级调度方案：使用 SLO-aware 策略去最优化内存使用，高效地平衡表现