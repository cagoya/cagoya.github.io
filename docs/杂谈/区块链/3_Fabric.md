# Fabric

## Hyperledger Fabric

### 简介

Hyperledger Fabric 是一个企业级的、开源的分布式账本技术（DLT）平台，专为企业环境设计，它是联盟链，参与者需要经过身份验证和授权才能加入网络。

### 核心架构

区块链的基础概念就不再复述，Hyperledger Fabric 的架构大致如下：

1. 账本（Ledger）：
   - 区块链：以区块形式存储的、不可变的交易顺序记录。
   - 世界状态：是一个键值（Key-Value）数据库（通常使用 LevelDB 或 CouchDB），保存了链码操作数据的当前最新状态。它使得查询数据非常高效。
2. 智能合约/链码（Chaincode）：业务逻辑的核心。它是在网络节点上运行的软件，用于初始化和管理账本状态（通过“get”、“put”、“delete”等操作）。链码定义了交易的规则。
3. 对等节点：网络的基本单元，负责维护账本和运行链码。
   - Endorsing Peer： 专门负责模拟执行交易（执行链码但不提交结果）并生成背书签名。
   - Committing Peer： 验证从排序服务接收的区块，然后将其提交（写入）到本地的账本副本中。所有 Peer 都是提交节点。
4. 排序服务（Ordering Service）：一个将交易排序并打包成区块的节点集合。它不执行交易，也不维护账本。它的核心职责是就交易的顺序达成共识，并确保所有节点接收到相同的区块序列。
5. 通道（Channel）：每个通道都有一个独立的账本，只有加入该通道的节点才能访问其数据。
6. 成员服务提供商（MSP）：负责管理网络中所有参与者的身份和证书（基于公钥基础设施 PKI），为网络提供准入控制和身份验证。

## 环境部署

Fabric 网络环境：包括 Peer、Orderer、CA 等节点。通常可使用 Docker Compose 部署，参考[官方文档](https://doc-fabric.readthedocs.io/en/latest/getting_started.html)。需要一份配置文件`config.yaml`，用于 SDK 获知客户端身份和网络的拓扑结构。

### web 开发

整个系统可以分为三层：

1. 前端：提供用户交互的 UI，可视化操作结果
2. 后端：响应前端请求，并与区块链网络交互
3. 区块链层：负责处理所有核心业务逻辑、维护账本状态、执行交易并确保一致性

![alt text](../images/sdk.png)